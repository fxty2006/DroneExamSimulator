# 🚁 ドローン国家資格 学科試験シミュレーター

ドローン国家資格（一等・二等無人航空機操縦士）の学科試験対策アプリです。
Google Gemini API を活用し、公式の教則PDFの内容に基づいた問題を**無限に生成**することができます。

v0.2.0より Web UI (Streamlit) に完全対応し、より直感的に学習できるようになりました。

![license](https://img.shields.io/github/license/fxty2006/DroneExamSimulator)
![python](https://img.shields.io/badge/python-3.10%20%7C%203.11%20%7C%203.12-blue)
![platform](https://img.shields.io/badge/Windows-10%20%7C%2011-blue)

## ✨ 主な機能

### 📚 1. 模擬試験 (CBT形式)
*   🔰 **二等** (30分 / 50問)
*   👑 **一等** (75分 / 70問)
*   **本番モード**: タイマー付き、解説なしで緊張感のあるテストが可能。
*   **練習モード**: 1問解くごとに正解・解説を表示。
*   **🆕 報告機能**: 練習中に「解説がおかしい」「誤字がある」等の問題があれば、その場で**「⚠️ 報告」ボタン**を押すことで記録に残せます。
*   **復習機能**: 試験終了後、「間違えた問題だけ」を再テストできます。

### 📝 2. AI問題作成 (Generator)
*   国交省の「教則PDF」をAI (Gemini) に読み込ませ、最新の法令に対応した問題を自動生成。
*   APIキーさえあれば、問題のストックを無限に増やせます。

### 🛠️ 3. データ管理 & 修正 (Review)
AIが生成した問題に誤りがあっても大丈夫です。
*   **報告の確認**: 模擬試験中にユーザーが報告した問題を一覧で確認できます。
*   **CSVエクスポート**: 問題データをExcelで編集可能な形式で出力。
*   **CSVインポート**: 修正したデータを読み込み、データベースを更新。
*   **DB診断**: データの破損やID重複を自動修復。

## 🔑 APIキーと制限について

### 1. 試験シミュレーター (問題を解く)
**APIキー不要** で動作します。
同梱のデータを使用して、オフラインで学習できます。

### 2. 問題ジェネレーター (問題を作る)
新しい問題をAIに作成させたい場合のみ、無料の Google Gemini APIキー が必要です。

**【重要：1日の作成上限について】**
本ツールでは精度の高い「Proモデル」の使用を推奨していますが、無料プランのAPIキーには **「1日あたりの使用回数制限 (RPD)」** があります。
*   **作成目安**: Proモデル(無料枠)の場合、**1日に作成できるのは「約2セット（約100問）」程度** です。
*   制限を超えた場合、エラー（429 Error）が出ますが、**翌日になればリセットされ、また作成できるようになります。**
*   **【課金について】** 無料プランであれば課金されることはありません。ただし、**課金設定（Pay-as-you-go）を有効にしているAPIキーを使用する場合は従量課金が発生します**のでご注意ください。

## 🚀 導入と使い方

### 📥 ダウンロード方法による違い

1.  **Releases から ZIPをダウンロードする場合 (推奨)**
    *   必要なライブラリ(`libs`)、データ(`data`)、PDF(`rules.pdf`)が全て含まれています。
    *   解凍してすぐに利用可能です。オフライン環境でも動作します。

2.  **Code ボタンから Source code をダウンロードする場合**
    *   **ライブラリなし**: 初回起動時にインターネット接続が必須です（自動ダウンロードされます）。
    *   **PDFなし**: `rules.pdf` を別途用意してフォルダに入れる必要があります。
    *   **データなし**: `data` フォルダが無いため、最初は問題がありません。AI生成を実行すると自動でフォルダが作成されます。

### インストールと起動
1.  ダウンロードしたZIPを**必ず「展開（解凍）」**してください。
2.  フォルダ内の **`start.bat`** をダブルクリックします。
3.  **環境構築（初回のみ）**:
    *   **Pythonの確認**: PCにPythonが入っていない場合、自動インストールを試みます。
    *   ※企業のPCやセキュリティ設定によっては自動インストールに失敗することがあります。その場合はブラウザでPython公式サイトが開くので、手動でインストールしてください。
4.  準備が整うと、自動的にブラウザが立ち上がりアプリが開始します。

### 終了方法について（重要）
*   ブラウザを閉じただけでは、裏で動いているプログラム（黒い画面/CMD）は終了しません。
*   アプリ内のメニューにある **「🚪 アプリを終了」ボタン** を押すか、黒い画面（CMD）を閉じて終了させてください。

## 📂 フォルダ構成

*   `start.bat`: **起動用ファイル（これを使います）**
*   `main_ui.py`: アプリのメインプログラム
*   `ui_parts.py`, `view_exam.py`...: 画面ごとのプログラムファイル
*   `generator_logic.py`, `quiz_logic.py`: 裏側の処理ロジック
*   `data/`: 問題データ (.json) が保存される場所
    *   `csv_review/`: 修正用CSVや、報告された問題のリストが出力されます
*   `libs/`: プログラムに必要な部品（※Releases版のみ同梱）
*   `rules.pdf`: 問題生成の元となる教則PDF

## ⚠️ 免責事項

*   本アプリはAI (Google Gemini) を利用して問題を生成します。稀に誤った情報や不自然な日本語が含まれる可能性があります。
*   学習の際は、必ず公式の教則と照らし合わせてください。
*   生成された問題の内容に誤りがある場合は、「報告機能」や「データ管理」タブを活用して修正を行ってください。

## 📜 ライセンス
MIT License